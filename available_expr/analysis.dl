[200~Pattern Function Module AvailableExpressions_LAT 
model   org.inca.data.test.analyses.plugin 
package availableExpressions    imports     ControlFlowAnalysis                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   
                                                                                                                                          CommonAnalysisFunctions                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               
                                                                                                                                          Availability                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          
------------------------------                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                
public def getAvailableExpressionsBefore_LAT(stmt : Stmt, op : BinaryOperation) : Availability/lub = { 
  src := getFlowSource(stmt) 
  return getAvailableExpressionsAfter_LAT(src, op) 
}                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                
public def getAvailableExpressionsAfter_LAT(stmt : Stmt, op : BinaryOperation) : Availability/lub = { 
  // if stmt is not an assignment 
  assert undef assignment(stmt) 
  switch { 
    // ... check if op was already an available expression 
    return getAvailableExpressionsBefore_LAT(stmt, op) 
  } alt { 
    // ... plus collect the available expressions from stmt itself 
    assert def isComponentOf(stmt, op) 
    return Availability.Available 
  } 
} alt { 
  // if stmt is an assignment 
  assert def assignment(stmt) 
  // get the variable that it assigns to 
  var := getVariable(stmt) 
  switch { 
    // ... check if op was already an available expression and it is not invalidated by the assignment 
    assert def getAvailableExpressionsBefore_LAT(stmt, op) 
    switch { 
      assert undef referencesVariable(op, var) 
      return Availability.Available 
    } alt { 
      assert def referencesVariable(op, var) 
      return Availability.Unavailable 
    } 
  } alt { 
    // ... plus collect the available expressions from stmt itself that are not invalidated by the assignment 
    assert def isComponentOf(stmt, exp) 
    assert op == exp 
    switch { 
      assert undef referencesVariable(exp, var) 
      return Availability.Available 
    } alt { 
      assert def referencesVariable(exp, var) 
      return Availability.Unavailable 
    } 
  } 
}
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                
/** 
  Enumerates binary operations that have a variable reference component.  
 
 */ 
private def referencesVariable(exp : BinaryOperation, var : VariableDeclaration) : Void = { 
  component := getComponents(exp) 
  assert component instanceOf VariableReference 
  assert component.variableDeclaration == var 
}                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                
